#line 1 "/local/mnt/workspace/CRMBuilds/TZ.BF.2.5.c10-00004-M8909AAAAANAZT-2_20161130_222454/b/trustzone_images/core/securemsm/trustzone/qsee/kernel/syscall/tzbsp_asm.s"

;*====*====*====*====*====*====*====*====*====*====*====*====*====*====*====*
;
;     T R U S T Z O N E   A S M
;
; GENERAL DESCRIPTION
;   Assembly functions
;
; Copyright (c) 2011 by Qualcomm Technologies, Incorporated.All Rights Reserved.
;*====*====*====*====*====*====*====*====*====*====*====*====*====*====*====*

;*====*====*====*====*====*====*====*====*====*====*====*====*====*====*====*
;
;                           EDIT HISTORY FOR FILE
;
; This section contains comments describing changes made to the module.
; Notice that changes are listed in reverse chronological order.
;
; $Header: 
;
; when       who     what, where, why
; --------   ---     --------------------------------------------------------
; 03/28/11   tk      Initial version
;*====*====*====*====*====*====*====*====*====*====*====*====*====*====*====*


;============================================================================
;
;                            MODULE INCLUDES
;
;============================================================================
#line 1 "/local/mnt/workspace/CRMBuilds/TZ.BF.2.5.c10-00004-M8909AAAAANAZT-2_20161130_222454/b/trustzone_images/core/securemsm/trustzone/qsee/arch/msm8909/cfg/mmu/tzbsp_target.h"
















 


















 





 
#line 1 "/local/mnt/workspace/CRMBuilds/TZ.BF.2.5.c10-00004-M8909AAAAANAZT-2_20161130_222454/b/trustzone_images/build/cust/customer.h"


















 















































 






 



 
#line 1 "./custmataanaaa.h"






 

#line 1 "./targmataanaaa.h"






 

#line 176 "./targmataanaaa.h"



#line 185 "./targmataanaaa.h"

#line 11 "./custmataanaaa.h"


#line 142 "./custmataanaaa.h"


#line 1 "/local/mnt/workspace/CRMBuilds/TZ.BF.2.5.c10-00004-M8909AAAAANAZT-2_20161130_222454/b/trustzone_images/build/cust/custremoteapis.h"










 










































 





 











   




 
#line 85 "/local/mnt/workspace/CRMBuilds/TZ.BF.2.5.c10-00004-M8909AAAAANAZT-2_20161130_222454/b/trustzone_images/build/cust/custremoteapis.h"



     



   
#line 101 "/local/mnt/workspace/CRMBuilds/TZ.BF.2.5.c10-00004-M8909AAAAANAZT-2_20161130_222454/b/trustzone_images/build/cust/custremoteapis.h"
   



   
  
 
  
   




   
   


   


   


   
  

   










   

  

     




     










#line 210 "/local/mnt/workspace/CRMBuilds/TZ.BF.2.5.c10-00004-M8909AAAAANAZT-2_20161130_222454/b/trustzone_images/build/cust/custremoteapis.h"

   




   









   


















#line 258 "/local/mnt/workspace/CRMBuilds/TZ.BF.2.5.c10-00004-M8909AAAAANAZT-2_20161130_222454/b/trustzone_images/build/cust/custremoteapis.h"

#line 279 "/local/mnt/workspace/CRMBuilds/TZ.BF.2.5.c10-00004-M8909AAAAANAZT-2_20161130_222454/b/trustzone_images/build/cust/custremoteapis.h"






  

   
  

   
 

    
    


     
   







 




























   






















#line 145 "./custmataanaaa.h"
#line 1 "/local/mnt/workspace/CRMBuilds/TZ.BF.2.5.c10-00004-M8909AAAAANAZT-2_20161130_222454/b/trustzone_images/build/cust/custtarget.h"










 

















 

#line 46 "/local/mnt/workspace/CRMBuilds/TZ.BF.2.5.c10-00004-M8909AAAAANAZT-2_20161130_222454/b/trustzone_images/build/cust/custtarget.h"




 

#line 146 "./custmataanaaa.h"
#line 1 "/local/mnt/workspace/CRMBuilds/TZ.BF.2.5.c10-00004-M8909AAAAANAZT-2_20161130_222454/b/trustzone_images/build/cust/custsdcc.h"













 















 

 


 
#line 48 "/local/mnt/workspace/CRMBuilds/TZ.BF.2.5.c10-00004-M8909AAAAANAZT-2_20161130_222454/b/trustzone_images/build/cust/custsdcc.h"

 


 


 
 
 
 
 








#line 147 "./custmataanaaa.h"
#line 1 "/local/mnt/workspace/CRMBuilds/TZ.BF.2.5.c10-00004-M8909AAAAANAZT-2_20161130_222454/b/trustzone_images/build/cust/custsurf.h"








 




















 



 
 



 



 




 


 




 


 


 

 


 


 



 





 


#line 92 "/local/mnt/workspace/CRMBuilds/TZ.BF.2.5.c10-00004-M8909AAAAANAZT-2_20161130_222454/b/trustzone_images/build/cust/custsurf.h"


 




 
















 


                            



 


 






#line 148 "./custmataanaaa.h"
#line 1 "/local/mnt/workspace/CRMBuilds/TZ.BF.2.5.c10-00004-M8909AAAAANAZT-2_20161130_222454/b/trustzone_images/build/cust/custdiag.h"








 






























 



 

  

 

#line 57 "/local/mnt/workspace/CRMBuilds/TZ.BF.2.5.c10-00004-M8909AAAAANAZT-2_20161130_222454/b/trustzone_images/build/cust/custdiag.h"
  







   
   
 


 


 



















  

 






  

 




    
























#line 149 "./custmataanaaa.h"
#line 1 "/local/mnt/workspace/CRMBuilds/TZ.BF.2.5.c10-00004-M8909AAAAANAZT-2_20161130_222454/b/trustzone_images/build/cust/custefs.h"









 















 

#line 59 "/local/mnt/workspace/CRMBuilds/TZ.BF.2.5.c10-00004-M8909AAAAANAZT-2_20161130_222454/b/trustzone_images/build/cust/custefs.h"

   

   
















#line 150 "./custmataanaaa.h"
#line 1 "/local/mnt/workspace/CRMBuilds/TZ.BF.2.5.c10-00004-M8909AAAAANAZT-2_20161130_222454/b/trustzone_images/build/cust/custpmic.h"








 


















 



 

 


 






      
 

    
      
 

    

       
    

     

    
     

    
     


    

    

 
 
 

 







#line 151 "./custmataanaaa.h"
#line 1 "/local/mnt/workspace/CRMBuilds/TZ.BF.2.5.c10-00004-M8909AAAAANAZT-2_20161130_222454/b/trustzone_images/build/cust/custsio_8660.h"








 
                                        


































 






 




 








#line 72 "/local/mnt/workspace/CRMBuilds/TZ.BF.2.5.c10-00004-M8909AAAAANAZT-2_20161130_222454/b/trustzone_images/build/cust/custsio_8660.h"

 














   
#line 95 "/local/mnt/workspace/CRMBuilds/TZ.BF.2.5.c10-00004-M8909AAAAANAZT-2_20161130_222454/b/trustzone_images/build/cust/custsio_8660.h"




   
#line 106 "/local/mnt/workspace/CRMBuilds/TZ.BF.2.5.c10-00004-M8909AAAAANAZT-2_20161130_222454/b/trustzone_images/build/cust/custsio_8660.h"





#line 117 "/local/mnt/workspace/CRMBuilds/TZ.BF.2.5.c10-00004-M8909AAAAANAZT-2_20161130_222454/b/trustzone_images/build/cust/custsio_8660.h"




















 





 





#line 156 "/local/mnt/workspace/CRMBuilds/TZ.BF.2.5.c10-00004-M8909AAAAANAZT-2_20161130_222454/b/trustzone_images/build/cust/custsio_8660.h"


 




 







#line 214 "/local/mnt/workspace/CRMBuilds/TZ.BF.2.5.c10-00004-M8909AAAAANAZT-2_20161130_222454/b/trustzone_images/build/cust/custsio_8660.h"





#line 251 "/local/mnt/workspace/CRMBuilds/TZ.BF.2.5.c10-00004-M8909AAAAANAZT-2_20161130_222454/b/trustzone_images/build/cust/custsio_8660.h"













































#line 152 "./custmataanaaa.h"
#line 1 "/local/mnt/workspace/CRMBuilds/TZ.BF.2.5.c10-00004-M8909AAAAANAZT-2_20161130_222454/b/trustzone_images/build/cust/custsec.h"










 


















 






 



 

 


 






 


 


 


 
   
 







 



   


   


   







   




   
   
   



   
#line 111 "/local/mnt/workspace/CRMBuilds/TZ.BF.2.5.c10-00004-M8909AAAAANAZT-2_20161130_222454/b/trustzone_images/build/cust/custsec.h"

   


   




#line 1 "/local/mnt/workspace/CRMBuilds/TZ.BF.2.5.c10-00004-M8909AAAAANAZT-2_20161130_222454/b/trustzone_images/build/cust/custsfs.h"










 




























 






 



 

 


 









#line 72 "/local/mnt/workspace/CRMBuilds/TZ.BF.2.5.c10-00004-M8909AAAAANAZT-2_20161130_222454/b/trustzone_images/build/cust/custsfs.h"

 









#line 89 "/local/mnt/workspace/CRMBuilds/TZ.BF.2.5.c10-00004-M8909AAAAANAZT-2_20161130_222454/b/trustzone_images/build/cust/custsfs.h"

#line 122 "/local/mnt/workspace/CRMBuilds/TZ.BF.2.5.c10-00004-M8909AAAAANAZT-2_20161130_222454/b/trustzone_images/build/cust/custsec.h"






#line 153 "./custmataanaaa.h"

#line 187 "./custmataanaaa.h"

#line 81 "/local/mnt/workspace/CRMBuilds/TZ.BF.2.5.c10-00004-M8909AAAAANAZT-2_20161130_222454/b/trustzone_images/build/cust/customer.h"







 




























































































 
 




 




 





 




 
#line 247 "/local/mnt/workspace/CRMBuilds/TZ.BF.2.5.c10-00004-M8909AAAAANAZT-2_20161130_222454/b/trustzone_images/build/cust/customer.h"

#line 44 "/local/mnt/workspace/CRMBuilds/TZ.BF.2.5.c10-00004-M8909AAAAANAZT-2_20161130_222454/b/trustzone_images/core/securemsm/trustzone/qsee/arch/msm8909/cfg/mmu/tzbsp_target.h"
#line 1 "/local/mnt/workspace/CRMBuilds/TZ.BF.2.5.c10-00004-M8909AAAAANAZT-2_20161130_222454/b/trustzone_images/core/securemsm/trustzone/qsee/arch/msm8909/cfg/mmu/../common/tzbsp_target.h"
















 


















 





 
#line 44 "/local/mnt/workspace/CRMBuilds/TZ.BF.2.5.c10-00004-M8909AAAAANAZT-2_20161130_222454/b/trustzone_images/core/securemsm/trustzone/qsee/arch/msm8909/cfg/mmu/../common/tzbsp_target.h"





 



 




 
#line 65 "/local/mnt/workspace/CRMBuilds/TZ.BF.2.5.c10-00004-M8909AAAAANAZT-2_20161130_222454/b/trustzone_images/core/securemsm/trustzone/qsee/arch/msm8909/cfg/mmu/../common/tzbsp_target.h"






 


 











 


 


 


 


 


 


 



 



 



 




 




 



 







 



 



 



 



 



 



 




 




  




 






#line 198 "/local/mnt/workspace/CRMBuilds/TZ.BF.2.5.c10-00004-M8909AAAAANAZT-2_20161130_222454/b/trustzone_images/core/securemsm/trustzone/qsee/arch/msm8909/cfg/mmu/../common/tzbsp_target.h"


 





  


 









#line 45 "/local/mnt/workspace/CRMBuilds/TZ.BF.2.5.c10-00004-M8909AAAAANAZT-2_20161130_222454/b/trustzone_images/core/securemsm/trustzone/qsee/arch/msm8909/cfg/mmu/tzbsp_target.h"





 







 






 







 
 





 






 


 




 











 











 




 



 



#line 33 "/local/mnt/workspace/CRMBuilds/TZ.BF.2.5.c10-00004-M8909AAAAANAZT-2_20161130_222454/b/trustzone_images/core/securemsm/trustzone/qsee/kernel/syscall/tzbsp_asm.s"

    GET tzbsp_libarm_asm.inc
    GET tzbsp_asm.inc

;============================================================================
;
;                             MODULE DEFINES
;
;============================================================================

;============================================================================
;
;                             MODULE IMPORTS
;
;============================================================================

    ; Import the external symbols that are referenced in this module.
    IMPORT tzbsp_syscall
    IMPORT Workspace_N_Begin
    IMPORT |Image$$TZBSP_STACK$$ZI$$Limit|
    IMPORT |Image$$TZBSP_STACK$$ZI$$Base|
    IMPORT tzbsp_dcache_flush_all

;============================================================================
;
;                             MODULE EXPORTS
;
;============================================================================

    EXPORT tzbsp_loop_here
    EXPORT tzbsp_switch_execute_smc

;============================================================================
;
;                             MODULE DATA AREA
;
;============================================================================

    PRESERVE8
    CODE32
    AREA    TZBSP_ASM, CODE, READONLY, align=2

;======================================================================
; Called by tzbsp_error_hanlder only. We perform
; Clean up the registers and loop here until JTAG is connected.
;======================================================================
tzbsp_loop_here FUNCTION
    mov r0,#0
    mov r1,#0
    mov r2,#0
    mov r3,#0
    mov r4,#0
    mov r5,#0
    mov r6,#0
    mov r7,#0
    mov r8,#0
    mov r9,#0
    mov r10,#0
    mov r11,#0
    mov r12,#0
1   b   %b1
    ENDFUNC

;======================================================================
; The main message loop. Each incoming syscall will be handled by this
; loop.
;======================================================================
tzbsp_switch_execute_smc FUNCTION
    SMI  0x0                    ; After init just go to non-secure side.
1   ldr  r0,=Workspace_N_Begin
    blx  tzbsp_syscall          ; Every subsequent call is to msg processing.
    SMI  0x0                    ; Msg handled, return to non-secure side.
    b    %b1                    ; Back to secure side, loop to msg processing.
    ENDFUNC

; This area is used currently by DAL for heap.  It is defined here
; rather than the DAL layer so we can use the base address in our SCL
; file and MMU pagetable configurations
    AREA    TZBSP_HEAP_AREA, DATA, READWRITE, align=12
tzbsp_heap    % 0x8000

    END
